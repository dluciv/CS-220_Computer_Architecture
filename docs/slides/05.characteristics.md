<!-- -*- coding: utf-8 -*- -->
<span id="slides-title" hidden>Характеристики ЭВМ</span>

# Основные характеристики

- - - - - -

## Характеристики ЭВМ в целом

* Характеристики процессора
* Объём оперативной памяти
* Объём и скорость устройств хранения данных
* Состав и характеристики интерфейсных устройств

@pause@

## Характеристики процессора

* **Система команд** — уже было

@pause@

* **Тактовая частота** — частота тактового сигнала
  * **Тактовый сигнал** — периодический электрический сигнал, служащий для синхронизации электронных схем
  * **Такт** — промежуток времени между приходом тактовых сигналов
  * **Тактовый генератор** — электронная схема, генерирующая тактовый сигнал

@pause@


* **Разрядность** — обычно — ширина шины данных и размер машинного слова
  * **Машинное слово** — минимальная единица обмена данными между процессором и памятью
  * Часто также ширина шины адреса, размер стандартного типа `int` в C (может зависеть от ОС и транслятора)

= = = = = =

# Подробнее о тактовой частоте

- - - - - -

## Зачем нужен тактовый сигнал? (1)

* Для многих электронных компонент (например, сумматоров) задано максимальное время на операцию
* Время задаётся в тактах, например
  * Для Zilog Z80:
    * `push RR` (положить значение 16-битного регистра на стек) — 11 тактов
    * `pop RR` (снять со стека и сохранить в 16-битном регистре) — 10 тактов
    * `add a,R` (прибавить 8-битное значение в регистре `R` к `a`) — 4 такта
  * Для Intel 80386
    * `add eax, DWORD PTR [ebp-0x8]` (прибавить к 32-битному `eax` значение из памяти по адресу `ebp-8`) — 7 тактов
* Можно быть уверенным в том, когда операция завершена, а не проверять прогресс

@pause@

* На самом деле даже для Intel i80386 это не всегда так, а для более новых и подавно

- - - - - -

## Зачем нужен тактовый сигнал? (2)

* Ясно, в какой момент можно начинать выполнять следующую команду
* Ясно, как синхронизировать разные стадии выполнения одной и той же команды
* Ясно, как синхронизировать различные узлы ЭВМ

При этом

* В ЭВМ обычно много тактовых генераторов и тактовых частот — несколько для ЦП, для памяти (пониже), для общей шины (ещё ниже) и т.д... Чем дальше от ядра процессора, тем обычно ниже
* Тактовый сигнал не привязан к реальному времени: частота высокая, но может «плавать» или понижаться для экономии энергии

- - - - - -

## Примеры значений тактовой частоты

**1 Гц** (с${}^{-1}$) — единица частоты периодических событий, 1 событие в секунду

У ЭВМ первого поколения типичное значение тактовой частоты было в пределах 100 КГц

| Процессор           | Год выпуска | Тактовая частота |
|---------------------|------------:|-----------------:|
| Intel 4004          |        1971 |          740 КГц |
| Motorola 6800       |        1974 |            2 МГц |
| Zilog Z80           |        1976 |          2,5 МГц |
| Intel 80186         |        1982 |            6 МГц |
| Intel 80486 DX      |        1989 |           20 МГц |
| Intel 80486 DX4     |        1994 |          100 МГц |
| Pentium 4           |        2000 |          1,6 ГГц |
| Intel Xeon Westmere |        2010 |          3,6 ГГц |

@pause@

По идее, чем выше, тем «лучше», но у современного сложного процессора сигнал не успевает пройти от одной части кристалла к другой. Одно из решений — конвейеризация — позже.

- - - - - -

## Альтернатива

Асинхронные ЭВМ

* Блок процессора / узел внутри ЭВМ подаёт сигнал по мере готовности результата
* Позволяют добиться большей производительности, но сложнее в проектировании и устройстве

Примеры:

* ILLIAC I и II, GA144 (стековый, дла Forth)
* Длинные асинхронные операции на современных процессорах, например, деление на RISC

@pause@

* Устройства расширения в «обычных» ЭВМ — выполняют длительные операции (например, с участием DMA), сообщают о выполнении команд и получают следующие по мере готовности

= = = = = =

# Разрядность

= = = = = =

## Обычно разрядность это

* Количество бит в шине данных
* Количество бит в арифметических регистрах
* Размер целого числа, над которым аппаратно производится операция (машинное слово)

@pause@

## Часто разрядность это (ещё)

* Количество бит в шине адреса
* Количество бит в адресных регистрах
* Значение, которое определяет максимальное размер слов в оперативной памяти

@pause@

Но это «обычно»...

- - - - - -

## Внутренняя и внешняя разрядность

* **Внутренняя разрядность** — количество бит, из которых состоят регистры для целочисленных операций
* **Внешняя разрядность** — количество бит, из которых состоит шина данных

- - - - - -

## Примеры, подтверждения и исключения (1)

* Intel 8086
  * Шина данных — 16 бит
  * Арифметические регистры и операции — по 16 бит
    * Но `mul ax, R/M` считает 32-битный результат `DX:AX` ← `AX * R/M`
  * Адресные регистры — 16 бит (адресуют по 64 КиБ)
  * Шина адреса — 20 бит (16-битный адрес складывается с адресом сегмента, это позволяет адресовать до 1 МиБ)
* Intel 8088 (сделан позже 8086, первый процессор IBM PC)
  * Всё то же самое, но шина данных 8 бит

@pause@

* Zilog Z80
  * Шина адреса — 16 бит
  * Шина данных — 8 бит
  * Арифметические регистры и операции — по 8 бит
    * Но `add hl bc` считает 16-битный результат над парами регистров

- - - - - -

## Примеры, подтверждения и исключения (2)

«Распиновка» Zilog Z80 и Intel 8086

![](images/05.Zilog_Z80_pinout.png) <!--.element: style="height: 75%;" -->  ![](images/05.Intel_8086_pinout.svg) <!--.element: style="height: 75%;" -->

- - - - - -

## Разрядность оперативной памяти (1)

Зачем вообще сделали Intel 8088? Сделали позже 8086, а разрядность шины данных меньше.

@pause@

Оперативная память [30-контактные](https://en.wikipedia.org/wiki/SIMM#30-pin_SIMMs) single in-line memory module — 8-битный

А тогда зачем сделали 8086? Точнее, как он пользовался памятью?

@pause@

* Один 16-битный модуль можно собрать из двух 8-битных. С 16-битными процессорами семейства x86 так и делали.

* В итоге «память вообще» получает номер «слова памяти», но слово может быть 8 или 16-битным, в зависимости от исполнения компьютера

- - - - - - -

## Разрядность оперативной памяти (2)

Процессоры даны с внутренней / внешней разрядностью

* SIMM [30-контактный](https://en.wikipedia.org/wiki/SIMM#30-pin_SIMMs) — 8 бит
  * X1 — i8088 $\_{16/8}$
  * X2 — i8086 $\_{16/16}$, i80186 $\_{16/16}$ , i80286 $\_{16/16}$, i386SX $\_{32/16}$
* SIMM [72-контактный](https://en.wikipedia.org/wiki/SIMM#72-pin_SIMMs) — 32 бит
  * X1 — i386 $\_{32/32}$, i486 $\_{32/32}$, i586 Overdrive $\_{32/32}$ (специально на место 80486)
  * X2 — i586 $\_{32/64}$
* [DIMM (Dual in-line memory module)](https://en.wikipedia.org/wiki/DIMM)  100-контактный — 64 бит
  * X1 — i586  $\_{32/64}$

Опции для экономии =)

* Если есть старая память или системная плата — можно поставить «урезанный» по внешней разрядности процессор — 8088, 386SX, 586 Overdrive
* Если есть старая память, на новую системную плату можно ставить старые модули меньшей разрядности парами

@pause@

У некоторых процессоров внутренняя разрядность могла быть ниже внешней для более производительного обмена данными с памятью. Про это позже в лекции про кэш

= = = = = = =

### Упражнения

* Найдите документацию по системной плате своего ПК, выясните, какие виды памяти и в каких сочетаниях в неё можно устанавливать

### Вопросы

* Что такое тактовый сигнал, тактовая частота и тактовый генератор?
* Приведите примеры асинхронных операций, не управляемых тактами
* Что такое внутренняя и внешняя разрядность?
* Зачем Intel выпускали версии процессоров с пониженной разрядностью?
